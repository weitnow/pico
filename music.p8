pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
    player={
        sp=1,
        x=59,
        y=59,
        anim=0,
        state="idle",
        flp=false,
    }

    --music(0)
end

function _update()
    set_state()
    player_animate()
end

function set_state()
    player.state = "idle"

    if btn(5) then
        player.state="punching"
    end
    if btn(4) then 
        player.state="defending"
    end

    if btn(0) then
        player.state="left"
    elseif btn(2) then
        player.state="up"
    elseif btn(1) then
        player.state="right"
    elseif btn(3) then
        player.state="down"
    end
end

function player_animate()
    if player.state == "idle" then
        idle()
    elseif player.state == "left" then
        printh("left")
    elseif player.state == "right" then
        printh("right")
    elseif player.state == "punching" then
        punching()
    elseif player.state == "defending" then
        printh("defending")
    end
end

function idle()
    if player.sp > 2 then
        player.sp = 1
    elseif time() - player.anim> .5 then
        player.anim=time()
        player.sp+=1
        if player.sp>2 then
            player.sp=1
        end
    end
end

function punching()
    if player.sp < 17 
    or player.sp > 19 then
        player.sp = 17
    elseif time() - player.anim> .1 then
        player.anim=time()
        player.sp+=1
        if player.sp > 19 then
            player.sp = 17
        end
    end
end

function _draw()
    cls()
    print("time() -> " .. time() , 10, 10)
    print("p.anim() -> " .. player.anim , 10, 20)
    print("spr -> " .. player.sp, 10, 30)
    print(player.state, 10, 40)
    spr(player.sp, player.x, player.y, 1, 1, player.flp)
end

__gfx__
0000000000444440004444400004444400044444000444440004444400044444c004444400000000000000000000000000000000000000000000000000000000
0000000000ccccc000ccccc00ccccccc0c0cccccc00cccccc0cccccc00cccccc0ccccccc04444400000000000000000000000000000000000000000000000000
007007000cf72f200cf72f20c00ff72fc0cff72f0ccff72f0c0ff72f0c0ff72f000ff72f0ccccc00000000000000000000000000000000000000000000000000
000770000cfffff00cfffef0000ffffe000ffffe000ffffe000ffffec00ffffe000ffffecf72f200000000000000000000000000000000000000000000000000
00077000000cc00000cccc000fccc0000fccc0000fccc0000fccc00000ccc0000000ccc0cfffef00000000000000000000000000000000000000000000000000
0070070000cccc000f0cc0f0000cc000000cc000000cc000000cc0000f0cc0000000cc0f00ccccf0000000000000000000000000000000000000000000000000
000000000f0cd0f0000cd0000cc0d00000cd00000dd0c00000dc000000dc000000000cd00f0ccd00000000000000000000000000000000000000000000000000
0000000000c00d0000c00d000000d00000cd00000000c00000dc00000dcc0000000000cd0000ccdd000000000000000000000000000000000000000000000000
00000000004444400044444000444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000ccccc000ccccc000ccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000cf72f200cf72f200cf72f20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000cfffff0c0fffff00cfffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000ccccf000cccf0000ccccf000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000fcc000000ccf00000cc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000cd000000cd000000cd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c00d0000c00d0000c00d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbbbbbbbbbbbbbbbbbbbbbb00bbbbbbbbbbbb00f999999ff999999fcc7cccccccc7cccc00000000000000000000000000000000000000000000000000000000
3bbb3bbb3bbb3bbbb333bb3b0bbb3bb3b333bbb09ff99ff99ff99ff9c7cccc7ccc7ccc7c00000000000000000000000000000000000000000000000000000000
33b333b33bb343b3bbb33333bbb333333b33bbbb999ff999999ff9997cccc7ccc7ccc7cc00000000000000000000000000000000000000000000000000000000
4b3444343bb444343b343434bb33333433333bbb999999999999f999cccc7ccccccccccc00000000000000000000000000000000000000000000000000000000
4b3424443b3449443b344434bb334444333433bbf9ffff9ff9ff9f997cccccc7ccccccc700000000000000000000000000000000000000000000000000000000
43444444434444444344444433344449434444334f9999f44f999ff4477cc774777ccc7400000000000000000000000000000000000000000000000000000000
44444d44444444444449444d344444444444444d4499994444999944447777444477774400000000000000000000000000000000000000000000000000000000
49444444444d447444444444444c4444464444444444444444444444444774444444444400000000000000000000000000000000000000000000000000000000
4444444444444444444444440000000000000000bbb9999ff99999bbbbbcccc66cccccbb00000000000000000000000000000000000000000000000000000000
4444444444444444444c44440000000000000000bbb99ff99ff99333bbbcc66cc66cc33300000000000000000000000000000000000000000000000000000000
44494444444444449444474400000000000000003b3ff999999ff4443b366cccccc6644400000000000000000000000000000000000000000000000000000000
4744444444454444444447740000000000000000439999999999444443cccccccccc444400000000000000000000000000000000000000000000000000000000
4444444445665444444476440000000000000000444fff9ff9ff4444444666c66c66444400000000000000000000000000000000000000000000000000000000
44444464445664444477644400000000000000004c4449f44f4444944c444c644644449400000000000000000000000000000000000000000000000000000000
444444444445544444474444000000000000000044444444444c444444444444444c444400000000000000000000000000000000000000000000000000000000
44e44444444444444444444400000000000000004444e474444444444444e4744444444400000000000000000000000000000000000000000000000000000000
33333333333333334444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbbb3bbbbb3bbbbb9999499999499999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b3bbbbbbb3bbbbbb9499999994999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333334444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
b3bbbb3bbbbb3bbb9499994999994999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bb3bbb3bbbbbb3bb9949994999999499000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
33333333333333334444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300000000000049940000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300000330000049940000033000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003b3300003bb3000049440000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300003b33000049940000494400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0033b300003bb3000044940000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300003bb3000049940000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb3000033b3000049940000449400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003bb300003bb3000049940000499400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
003b3300003b33000049440000494400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
011800000c043000000000000000246150000000000000000c043000000000000000246150000000000000000c043000000000000000246150000000000000000c04300000000000000024615000000000000000
011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01180000000000f0551204514035160250d0150f0551204514035160250d0150000000000000000000000000000000f0551204514035160250d0150f0551204514035160250d0150000000000000000000000000
011800000345506345082350a4250d3150325506445083350a3250d215084000a400296332762300000000000345506345082350a4250d3150325506445083350a3250d215000000000029633276230000000000
__music__
03 00010203

